@import "./theme-default.css";
@import "./theme-dark.css";

kirby-loop {
  /* Colors */
  --color-base: var(--color-neutral-900);
  --color-base-background: var(--color-neutral-0);

  --color-base-background-o-5: oklch(var(--color-neutral-l-0) var(--color-neutral-c) var(--color-neutral-h) / 0.05);
  --color-base-background-o-10: oklch(var(--color-neutral-l-0) var(--color-neutral-c) var(--color-neutral-h) / 0.1);
  --color-base-background-o-20: oklch(var(--color-neutral-l-0) var(--color-neutral-c) var(--color-neutral-h) / 0.2);
  --color-base-background-o-50: oklch(var(--color-neutral-l-0) var(--color-neutral-c) var(--color-neutral-h) / 0.5);
  --color-base-background-o-60: oklch(var(--color-neutral-l-0) var(--color-neutral-c) var(--color-neutral-h) / 0.6);
  --color-base-background-o-75: oklch(var(--color-neutral-l-0) var(--color-neutral-c) var(--color-neutral-h) / 0.75);
  --color-base-background-o-95: oklch(var(--color-neutral-l-0) var(--color-neutral-c) var(--color-neutral-h) / 0.95);

  --color-accent-light: oklch(calc(var(--color-accent-l) * var(--color-accent-light-factor)) var(--color-accent-c) var(--color-accent-h));
  --color-accent: oklch(var(--color-accent-l) var(--color-accent-c) var(--color-accent-h));
  --color-accent-dark: oklch(calc(var(--color-accent-l) * var(--color-accent-dark-factor)) var(--color-accent-c) var(--color-accent-h));

  --color-neutral-0: oklch(var(--color-neutral-l-0) var(--color-neutral-c) var(--color-neutral-h));
  --color-neutral-100: oklch(var(--color-neutral-l-100) var(--color-neutral-c) var(--color-neutral-h));
  --color-neutral-200: oklch(var(--color-neutral-l-200) var(--color-neutral-c) var(--color-neutral-h));
  --color-neutral-300: oklch(var(--color-neutral-l-300) var(--color-neutral-c) var(--color-neutral-h));
  --color-neutral-400: oklch(var(--color-neutral-l-400) var(--color-neutral-c) var(--color-neutral-h));
  --color-neutral-500: oklch(var(--color-neutral-l-500) var(--color-neutral-c) var(--color-neutral-h));
  --color-neutral-600: oklch(var(--color-neutral-l-600) var(--color-neutral-c) var(--color-neutral-h));
  --color-neutral-700: oklch(var(--color-neutral-l-700) var(--color-neutral-c) var(--color-neutral-h));
  --color-neutral-800: oklch(var(--color-neutral-l-800) var(--color-neutral-c) var(--color-neutral-h));
  --color-neutral-900: oklch(var(--color-neutral-l-900) var(--color-neutral-c) var(--color-neutral-h));
  --color-neutral-1000: oklch(var(--color-neutral-l-1000) var(--color-neutral-c) var(--color-neutral-h));

  --color-success: oklch(0.65 0.15 150);
  --color-warning: oklch(0.75 0.15 80);
  --color-error: oklch(0.65 0.18 25);
  --color-info: oklch(0.65 0.15 220);

  --font-family: -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    Helvetica,
    Arial,
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    sans-serif;

  --line-height: 1.4;

  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 550;
  --font-weight-bold: 700;

  --font-size-3: clamp(1.9531rem, 1.4262rem + 1.7565vw, 3.5339rem);
  --font-size-4: clamp(1.5625rem, 1.2503rem + 1.0408vw, 2.4992rem);
  --font-size-5: clamp(1.25rem, 1.0775rem + 0.575vw, 1.7675rem);
  --font-size-6: clamp(1rem, 0.9167rem + 0.2778vw, 1.25rem);
  --font-size-7: clamp(0.8rem, 0.772rem + 0.0934vw, 0.884rem);
  --font-size-8: clamp(0.6252rem, 0.6449rem + -0.0165vw, 0.64rem);

  --border-radius-s: 0.125rem;
  --border-radius: 0.25rem;
  --border-radius-rounded: 4096px;

  --space-2xs: clamp(0.25rem, 0.2292rem + 0.0694vw, 0.3125rem);
  --space-xs: clamp(0.5rem, 0.4583rem + 0.1389vw, 0.625rem);
  --space-s: clamp(1rem, 0.9167rem + 0.2778vw, 1.25rem);
  --space-m: clamp(1.5rem, 1.375rem + 0.4167vw, 1.875rem);
  --space-l: clamp(2rem, 1.8333rem + 0.5556vw, 2.5rem);
  --space-2xs-xs: clamp(0.25rem, 0.125rem + 0.4167vw, 0.625rem);
  --space-xs-s: clamp(0.5rem, 0.25rem + 0.8333vw, 1.25rem);
  --space-s-m: clamp(1rem, 0.7083rem + 0.9722vw, 1.875rem);
  --space-m-l: clamp(1.5rem, 1.1667rem + 1.1111vw, 2.5rem);
  --space-s-l: clamp(1rem, 0.5rem + 1.6667vw, 2.5rem);

  /* Shadow tokens */
  --shadow-s: 0 0.1em 0.25em oklch(var(--color-neutral-l-900) var(--color-neutral-c) var(--color-neutral-h) / 0.1);
  --shadow-m: 0 2px 8px oklch(var(--color-neutral-l-900) var(--color-neutral-c) var(--color-neutral-h) / 0.08),
    0 8px 16px oklch(var(--color-neutral-l-900) var(--color-neutral-c) var(--color-neutral-h) / 0.12),
    0 16px 24px oklch(var(--color-neutral-l-900) var(--color-neutral-c) var(--color-neutral-h) / 0.08);
  --shadow-l: 0 4px 16px oklch(var(--color-neutral-l-900) var(--color-neutral-c) var(--color-neutral-h) / 0.08),
    0 12px 32px oklch(var(--color-neutral-l-900) var(--color-neutral-c) var(--color-neutral-h) / 0.12),
    0 24px 48px oklch(var(--color-neutral-l-900) var(--color-neutral-c) var(--color-neutral-h) / 0.16),
    0 48px 80px oklch(var(--color-neutral-l-900) var(--color-neutral-c) var(--color-neutral-h) / 0.08);
  --shadow-light-edge: inset 1px 1px 1px oklch(var(--color-neutral-l-0) var(--color-neutral-c) var(--color-neutral-h) / 0.3);
  --shadow-dark-edge: inset 0 -1px 1px oklch(var(--color-neutral-l-900) var(--color-neutral-c) var(--color-neutral-h) / 0.3);

  /* Backdrop tokens */
  --backdrop-blur: blur(6px);
  --backdrop-glass: var(--backdrop-blur) saturate(1.4) brightness(1.2);

  /* Background tokens */
  --background-glass: linear-gradient(135deg, transparent, var(--color-base-background-o-95));
  --background-glass-frosted: linear-gradient(0deg, var(--color-base-background-o-75) 0%, var(--color-base-background-o-95) 50%);

  /* Opacity tokens */
  --opacity-subtle: 0.5;
  --opacity-medium: 0.7;
  --opacity-strong: 0.9;

  /* Outline tokens */
  --outline-color: var(--color-accent);
  --outline-offset: 0.25rem;

  /* Transition tokens */
  --transition-duration: 0.2s;
  --transition-duration-jump: 0.4s;
  --transition-easing-jump: cubic-bezier(0.44, 1.2, 0.64, 1);
  --transition-easing: cubic-bezier(0, 0, 0.2, 1);

  /* Z-index tokens */
  --z-loop-marker: 9998;
  --z-loop-panel: 9999;
  --z-loop-dialog: 10000;

  /* Author */
  --author-avatar-color: var(--color-neutral-600);
  --author-avatar-background-color: var(--color-neutral-100);
  --author-avatar-size: 2.5rem;
  --author-avatar-border-radius: var(--border-radius-rounded);
  --author-avatar-font-size: var(--font-size-6);

  /* Button */
  --button-background: transparent;
  --button-color: var(--color-neutral-600);
  --button-border-radius: var(--border-radius);
  --button-padding: 0 var(--space-xs);
  --button-gap: var(--space-2xs);
  --button-font-size: var(--font-size-7);
  --button-font-weight: var(--font-weight-medium);
  --button-height: 2.25rem;
  --button-transition: var(--transition-duration) var(--transition-easing);
  --button-outline-color: var(--outline-color);
  --button-outline-offset: var(--outline-offset);

  --button-hover-color: var(--color-neutral-900);
  --button-hover-background: var(--color-neutral-200);

  --button-header-background: transparent;
  --button-header-height: 3rem;
  --button-header-padding: 0 var(--space-s);
  --button-header-hover-background: var(--color-base-background-o-95);
  --button-header-blend-mode: multiply;

  --button-panel-background: transparent;
  --button-panel-padding: 0 calc(var(--space-s) * 0.4);

  --button-solid-background: var(--color-neutral-100);
  --button-solid-hover-color: var(--color-neutral-900);
  --button-solid-hover-background: var(--color-neutral-200);

  --button-small-height: 1.5rem;
  --button-small-font-size: var(--font-size-7);

  --button-icon-background: var(--color-neutral-0);
  --button-icon-color: var(--color-neutral-500);
  --button-icon-height: 3rem;
  --button-icon-shadow: var(--shadow-s);
  --button-icon-border-radius: var(--border-radius-rounded);
  --button-icon-font-size: var(--font-size-6);
  --button-icon-hover-background: var(--color-neutral-200);
  --button-icon-hover-color: var(--color-neutral-900);

  --button-marker-background: var(--color-accent);
  --button-marker-color: var(--color-accent-dark);
  --button-marker-font-weight: var(--font-weight-bold);
  --button-marker-border-radius: var(--border-radius-rounded);
  --button-marker-highlighted-background: var(--color-accent);
  --button-marker-highlighted-color: var(--color-accent-dark);

  --button-filter-background: transparent;
  --button-filter-color: var(--color-neutral-500);
  --button-filter-height: 1.75rem;
  --button-filter-font-size: var(--font-size-8);
  --button-filter-padding: 0 var(--space-xs);
  --button-filter-border-radius: calc(var(--border-radius) - 2px);
  --button-filter-hover-color: var(--color-neutral-700);
  --button-filter-hover-background: var(--color-neutral-200);
  --button-filter-active-background: var(--color-base-background);
  --button-filter-active-color: var(--color-base);
  --button-filter-active-font-weight: var(--font-weight-medium);

  --button-menu-item-background: transparent;
  --button-menu-item-color: var(--color-neutral-700);
  --button-menu-item-padding: var(--space-2xs) var(--space-xs);
  --button-menu-item-border-radius: calc(var(--border-radius) - 2px);
  --button-menu-item-font-size: var(--font-size-7);
  --button-menu-item-gap: var(--space-2xs);
  --button-menu-item-hover-background: var(--color-neutral-100);
  --button-menu-item-hover-color: var(--color-neutral-900);
  --button-menu-item-active-background: var(--color-accent-light);
  --button-menu-item-active-color: var(--color-accent-dark);
  --button-menu-item-active-font-weight: var(--font-weight-medium);

  --button-active-background: var(--color-accent);
  --button-active-color: var(--color-accent-dark);

  --button-disabled-opacity: var(--opacity-subtle);
  --button-disabled-hover-color: var(--color-neutral-700);
  --button-disabled-hover-background: var(--color-neutral-100);

  /* Comment */
  --comment-avatar-size: 2.5rem;
  --comment-marker-background: var(--color-neutral-200);
  --comment-marker-color: var(--color-neutral-800);
  --comment-line-background: var(--color-neutral-100);
  --comment-line-width: 0.1rem;
  --comment-line-offset: calc(var(--space-s) + var(--comment-avatar-size) / 2);

  --comment-header-font-size: var(--font-size-7);
  --comment-header-padding: var(--space-s);
  --comment-header-gap: var(--space-s);

  --comment-content-padding: var(--space-xs);
  --comment-content-background: var(--color-neutral-100);
  --comment-content-background-dark: var(--color-neutral-200);
  --comment-content-border-radius: var(--border-radius);

  --comment-author-gap: var(--space-xs);
  --comment-author-margin-bottom: var(--space-2xs);
  --comment-timestamp-font-size: var(--font-size-8);
  --comment-timestamp-color: var(--color-neutral-300);

  --comment-replies-padding: 0 var(--space-s);
  --comment-replies-gap: var(--space-s);

  --comment-footer-padding: var(--space-s);
  --comment-footer-gap: var(--space-s);
  --comment-buttons-gap: var(--space-xs);

  /* CommentDialog */
  --comment-dialog-position: absolute;
  --comment-dialog-max-width: 300px;
  --comment-dialog-border-radius: var(--border-radius);
  --comment-dialog-shadow: var(--shadow-s);
  --comment-dialog-backdrop-background: transparent;
  --comment-dialog-textarea-font-size: var(--font-size-6);

  /* CommentForm */
  --comment-form-background: var(--color-base-background);
  --comment-form-color: var(--color-base);
  --comment-form-border: 1px solid var(--color-neutral-200);
  --comment-form-border-radius: var(--border-radius);

  --comment-form-textarea-height: 15ch;
  --comment-form-textarea-padding: var(--space-s);
  --comment-form-textarea-background: var(--color-base-background);
  --comment-form-textarea-font-family: var(--font-family);
  --comment-form-textarea-font-size: var(--font-size-7);

  --comment-form-footer-padding: var(--space-xs);
  --comment-form-footer-gap: var(--space-xs);

  --comment-form-hint-font-size: var(--font-size-8);
  --comment-form-hint-color: var(--color-neutral-300);
  --comment-form-hint-padding: 0 var(--space-xs) var(--space-xs) var(--space-xs);

  /* ContextMenu */
  --context-menu-container-bottom: var(--space-s);
  --context-menu-container-right: var(--space-s);
  --context-menu-container-z-index: 10;

  --context-menu-trigger-size: 2.5rem;
  --context-menu-trigger-border-radius: var(--border-radius-rounded);

  --context-menu-background: var(--color-base-background);
  --context-menu-border-radius: var(--border-radius);
  --context-menu-shadow: var(--shadow-s);
  --context-menu-padding: var(--space-xs);
  --context-menu-min-width: 12rem;
  --context-menu-backdrop-background: transparent;

  --context-menu-section-gap: var(--space-2xs);

  --context-menu-title-font-size: var(--font-size-8);
  --context-menu-title-font-weight: var(--font-weight-medium);
  --context-menu-title-color: var(--color-neutral-500);
  --context-menu-title-margin-bottom: var(--space-2xs);
  --context-menu-title-letter-spacing: 0.05em;

  --context-menu-filter-gap: 1px;

  --context-menu-filter-dot-size: 0.5em;
  --context-menu-filter-dot-border-radius: 50%;
  --context-menu-filter-dot-margin-right: var(--space-2xs);
  --context-menu-filter-dot-open-background: var(--color-accent);
  --context-menu-filter-dot-resolved-background: var(--color-neutral-400);

  /* Header */
  --header-position: fixed;
  --header-top: var(--space-xs);
  --header-transform: translateX(-50%);
  --header-color: var(--color-base);
  --header-border-radius: var(--border-radius-rounded);
  --header-z-index: 9999;
  --header-bottom-position: var(--space-xs);
  --header-backdrop-filter: var(--backdrop-glass);
  --header-background: var(--background-glass);

  --header-count-size: 2rem;
  --header-count-border-radius: var(--border-radius-rounded);
  --header-count-backdrop-filter: var(--backdrop-glass);
  --header-count-background: var(--background-glass);

  /* Marker */
  --marker-size: 2rem;
  --marker-position: absolute;
  --marker-z-index: var(--z-loop-marker);
  --marker-transform: translate(-50%, -50%);
  --marker-border-radius: var(--border-radius-rounded);

  --marker-pulse-animation: pulse 1s ease-in-out;
  --marker-pulse-shadow-start: 0 0 0 0 var(--color-accent);
  --marker-pulse-shadow-transparent: 0 0 0 8px transparent;
  --marker-pulse-shadow-subtle: 0 0 0 8px rgba(128, 128, 128, 0.15);
  --marker-pulse-shadow-final: 0 0 0 16px transparent;

  /* Panel */
  --panel-width: 380px;
  --panel-mobile-width: 85svw;
  --panel-position: fixed;
  --panel-right: var(--space-xs);
  --panel-top: var(--space-xs);
  --panel-height: calc(100svh - var(--space-xs) * 2);
  --panel-transform-closed: translateX(calc(100% + var(--space-xs)));
  --panel-transform-open: translateX(0);
  --panel-color: var(--color-base);
  --panel-border-radius: var(--border-radius);
  --panel-border-top-left-radius: 0;
  --panel-transition: var(--transition-duration-jump) var(--transition-easing-jump);
  --panel-z-index: var(--z-loop-panel);
  --panel-shadow: var(--shadow-m);

  --panel-header-transform-closed: translate(-95%);
  --panel-header-transform-open: translate(calc(-100% + 1px));
  --panel-header-transform-hover: translate(calc(-100% + 1px));
  --panel-header-border-radius: var(--border-radius-rounded);
  --panel-header-gap: var(--space-xs);
  --panel-header-backdrop-filter: var(--backdrop-glass);
  --panel-header-background: var(--background-glass);

  --panel-threads-background: var(--color-base-background-o-95);
  --panel-threads-backdrop: var(--backdrop-blur);
  --panel-threads-border-radius: var(--border-radius);
  --panel-threads-border-top-left-radius: 0;
  --panel-threads-padding: 0 0 var(--space-s) 0;
  --panel-threads-item-margin: var(--space-s);
  --panel-threads-scrollbar-width: thin;

  --panel-no-threads-padding: var(--space-s) var(--space-l);
  --panel-no-threads-font-size: var(--font-size-6);
  --panel-no-threads-color: var(--color-neutral-300);

  /* Reply */
  --reply-gap: var(--space-s);
  --reply-content-padding: var(--space-xs);
  --reply-content-background: var(--color-neutral-100);
  --reply-content-background-dark: var(--color-neutral-200);
  --reply-content-border-radius: var(--border-radius);

  --reply-header-gap: var(--space-xs);
  --reply-header-margin-bottom: var(--space-2xs);
  --reply-timestamp-font-size: var(--font-size-8);
  --reply-timestamp-color: var(--color-neutral-300);

  /* WelcomeDialog */
  --welcome-dialog-background: var(--background-glass-frosted);
  --welcome-dialog-backdrop-filter: var(--backdrop-glass);
  --welcome-dialog-border: 0px;
  --welcome-dialog-border-radius: var(--border-radius);
  --welcome-dialog-shadow: var(--shadow-l), var(--shadow-light-edge),
    var(--shadow-dark-edge);
  --welcome-dialog-max-width: 500px;

  --welcome-dialog-backdrop-background: var(--color-base-background-o-10);
  --welcome-dialog-backdrop-backdrop-filter: none;

  --welcome-dialog-form-padding: var(--space-l);

  --welcome-dialog-title-margin: 0 0 var(--space-s) 0;
  --welcome-dialog-title-font-size: var(--font-size-4);
  --welcome-dialog-title-color: var(--color-base);
  --welcome-dialog-title-font-weight: var(--font-weight-bold);

  --welcome-dialog-text-margin: 0 0 var(--space-m) 0;
  --welcome-dialog-text-font-size: var(--font-size-6);
  --welcome-dialog-text-color: var(--color-neutral-600);
  --welcome-dialog-text-line-height: var(--line-height);

  --welcome-dialog-name-section-margin: var(--space-l);

  --welcome-dialog-input-border: 1px solid var(--color-neutral-300);
  --welcome-dialog-input-border-radius: var(--border-radius-s);
  --welcome-dialog-input-padding: var(--space-xs);
  --welcome-dialog-input-font-family: var(--font-family);
  --welcome-dialog-input-font-size: var(--font-size-6);
  --welcome-dialog-input-color: var(--color-base);
  --welcome-dialog-input-background: var(--color-base-background);
  --welcome-dialog-input-outline-color: var(--outline-color);
  --welcome-dialog-input-outline-offset: var(--outline-offset);

  --welcome-dialog-footer-gap: var(--space-xs);

  /* Icon */
  --icon-size: 1em;
}

/* Dark theme overrides */
kirby-loop[data-theme="dark"] {
  --color-neutral-l-0: 0;
  --color-neutral-l-100: 0.1;
  --color-neutral-l-200: 0.2;
  --color-neutral-l-300: 0.3;
  --color-neutral-l-400: 0.4;
  --color-neutral-l-500: 0.5;
  --color-neutral-l-600: 0.6;
  --color-neutral-l-700: 0.7;
  --color-neutral-l-800: 0.9;
  --color-neutral-l-900: 0.95;
  --color-neutral-l-1000: 1;
}
